<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Logotest 1.0</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="game-container">
    <iframe id="iframe-id" src="https://serdj2846.github.io/MyGame/index.html" onload="iframeLoaded()"></iframe>
  </div>
  
 

User
<!DOCTYPE html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Unity WebGL Player | Logo</title>
    <link rel="shortcut icon" href="TemplateData/favicon.ico">
    <link rel="stylesheet" href="TemplateData/style.css">
    <style>
      #unity-canvas.webgl-content {
        pointer-events: none;
      }
    </style>
  </head>

  <body>
    <div id="unity-container" class="unity-desktop">
      <canvas id="unity-canvas" tabindex="-1"></canvas>
      <div id="unity-fullscreen-button"></div>
      <div id="unity-loading-bar">
        <div id="unity-progress-bar-empty">
          <div id="unity-progress-bar-full"></div>
        </div>
      </div>
    </div> 

    <script>
      document.addEventListener('wheel', onScroll, false);
      document.addEventListener('mousemove', onMouse, false);
      var content = document.getElementById('unity-canvas');
      function onMouse() { content.style['pointer-events'] = 'auto'; }
      function onScroll() { content.style['pointer-events'] = 'none'; }
    </script>

    <script src="Build/script.js"></script>

  </body>
</html>

<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Logotest 1.0</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head

<body>
  <div class="game-container">
    <iframe id="iframe-id" src="https://serdj2846.github.io/MyGame/index.html"></iframe>
  </div>
    <script>
      document.addEventListener('wheel', onScroll, false);
      document.addEventListener('mousemove', onMouse, false);
      var content = document.getElementById('unity-canvas');
      function onMouse() { content.style['pointer-events'] = 'auto'; }
      function onScroll() { content.style['pointer-events'] = 'none'; }
    </script>
  <script src='load.js'></script>
</body>
  
</html>

почему в первом случае получается прокручивать страницу колесиком мыши, а во втором нет?
ChatGPT
Проблема в том, что во втором случае вы пытаетесь применить обработчики событий колесика мыши и движения мыши к элементу с id "unity-canvas", который отсутствует во втором HTML-коде.

Вот ваш код из второго файла:

html
Copy code
<script>
  document.addEventListener('wheel', onScroll, false);
  document.addEventListener('mousemove', onMouse, false);
  var content = document.getElementById('unity-canvas');
  function onMouse() { content.style['pointer-events'] = 'auto'; }
  function onScroll() { content.style['pointer-events'] = 'none'; }
</script>
Этот код пытается получить элемент с id "unity-canvas" и применить к нему обработчики событий. Однако, в вашем втором HTML-файле такого элемента нет. Вместо этого у вас есть элемент с id "iframe-id". Если вы хотите применить эти обработчики событий к iframe, вы должны использовать его id, а не id несуществующего элемента.

Вот исправленный код:

html
Copy code
<script>
  document.addEventListener('wheel', onScroll, false);
  document.addEventListener('mousemove', onMouse, false);
  var content = document.getElementById('iframe-id'); // заменено на 'iframe-id'
  function onMouse() { content.style['pointer-events'] = 'auto'; }
  function onScroll() { content.style['pointer-events'] = 'none'; }
</script>
Это должно позволить вашему второму HTML-файлу обрабатывать события мыши так же, как и первый файл.

User
давай добавим сюда еще и возможность прокручивать пальцем страницу на мобильном устройстве
ChatGPT
Для добавления возможности прокручивать страницу пальцем на мобильных устройствах вам следует использовать событие touchmove. Вот как вы можете модифицировать ваш скрипт для обработки этого события:

html
Copy code
<script>
  document.addEventListener('wheel', onScroll, false);
  document.addEventListener('mousemove', onMouse, false);
  document.addEventListener('touchmove', onTouchMove, false); // Добавлено событие touchmove
  var content = document.getElementById('iframe-id'); // заменено на 'iframe-id'
  function onMouse() { content.style['pointer-events'] = 'auto'; }
  function onScroll() { content.style['pointer-events'] = 'none'; }
  function onTouchMove() { content.style['pointer-events'] = 'auto'; } // Обработчик события touchmove
</script>
Теперь при прокрутке страницы пальцем на мобильном устройстве содержимое iframe также должно реагировать.

User
<script>
  document.addEventListener('wheel', onScroll, false);
  document.addEventListener('mousemove', onMouse, false);
  var content = document.getElementById('iframe-id'); // заменено на 'iframe-id'
  function onMouse() { content.style['pointer-events'] = 'auto'; }
  function onScroll() { content.style['pointer-events'] = 'none'; }
</script>
давай сначала разберемся почему это не работает
ChatGPT
Проблема здесь в том, что скрипт пытается получить элемент с id "iframe-id" до того, как он загружен в DOM. В момент выполнения скрипта, когда он пытается получить этот элемент, он может еще не существовать в DOM, и поэтому переменная content будет равна null.

Решение этой проблемы состоит в том, чтобы переместить ваш скрипт после тега <iframe>, чтобы он выполнялся после того, как элемент с id "iframe-id" загрузится в DOM. Вот как это можно сделать:

html
Copy code
<body>
  <div class="game-container">
    <iframe id="iframe-id" src="https://serdj2846.github.io/MyGame/index.html"></iframe>
  </div>
  <script>
    document.addEventListener('wheel', onScroll, false);
    document.addEventListener('mousemove', onMouse, false);
    var content = document.getElementById('iframe-id');
    function onMouse() { content.style['pointer-events'] = 'auto'; }
    function onScroll() { content.style['pointer-events'] = 'none'; }
  </script>
  <script src='load.js'></script>
</body>
Теперь скрипт будет выполняться после загрузки <iframe>, и переменная content будет содержать ссылку на этот элемент.

User
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Logotest 1.0</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head

<body>
  <div class="game-container">
    <iframe id="iframe-id" src="https://serdj2846.github.io/MyGame/index.html"></iframe>
  </div>
  <script>
    document.addEventListener('wheel', onScroll, false);
    document.addEventListener('mousemove', onMouse, false);
    var content = document.getElementById('iframe-id'); // заменено на 'iframe-id'
    function onMouse() { content.style['pointer-events'] = 'auto'; }
    function onScroll() { content.style['pointer-events'] = 'none'; }
  </script>
  <script src='load.js'></script>
</body>
  
</html>
вот целиком, где ошибка?
ChatGPT
Проблема в том, что в теге <head> у вас отсутствует закрывающий тег </head>. Это может привести к непредсказуемому поведению в разных браузерах. Добавьте закрывающий тег </head> после вашего блока <link>:

html
Copy code
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Logotest 1.0</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head> <!-- Добавлен закрывающий тег -->
После этого ваш HTML-код будет корректным.

User
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Logotest 1.0</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="game-container">
    <iframe id="iframe-id" src="https://serdj2846.github.io/MyGame/index.html"></iframe>
  </div>
  <script>
    document.addEventListener('wheel', onScroll, false);
    document.addEventListener('mousemove', onMouse, false);
    var content = document.getElementById('iframe-id'); // заменено на 'iframe-id'
    function onMouse() { content.style['pointer-events'] = 'auto'; }
    function onScroll() { content.style['pointer-events'] = 'none'; }
  </script>
  <script src='load.js'></script>
</body>
  
</html>
исправь сам места где есть ошибки, а то я запутался
ChatGPT
Проблемы в вашем коде:

Отсутствует закрывающий тег </head>.
Неправильно указан закрывающий тег <head> (написано </head вместо </head>).
Вот исправленный вариант:

html
Copy code
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Logotest 1.0</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="game-container">
    <iframe id="iframe-id" src="https://serdj2846.github.io/MyGame/index.html"></iframe>
  </div>
  <script>
    document.addEventListener('wheel', onScroll, false);
    document.addEventListener('mousemove', onMouse, false);
    var content = document.getElementById('iframe-id'); // заменено на 'iframe-id'
    function onMouse() { content.style['pointer-events'] = 'auto'; }
    function onScroll() { content.style['pointer-events'] = 'none'; }
  </script>
  <script src='load.js'></script>
</body>
  
</html>
Теперь у вас должен работать правильный HTML-код.

User
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Logotest 1.0</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="game-container">
    <iframe id="iframe-id" src="https://serdj2846.github.io/MyGame/index.html"></iframe>
  </div>
  <script>
    document.addEventListener('wheel', onScroll, false);
    document.addEventListener('mousemove', onMouse, false);
    var content = document.getElementById('iframe-id'); // заменено на 'iframe-id'
    function onMouse() { content.style['pointer-events'] = 'auto'; }
    function onScroll() { content.style['pointer-events'] = 'none'; }
  </script>
  <script src='load.js'></script>
</body>
  
</html>
сейчас  так выглядит и все равно не работает
ChatGPT
Извините за путаницу. Проблема здесь в том, что скрипт пытается получить доступ к элементу <iframe> до того, как он загрузится. Для исправления этой ошибки нужно убедиться, что скрипт выполняется только после загрузки содержимого <iframe>. Вот как можно это сделать:

html
Copy code
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Logotest 1.0</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="game-container">
    <iframe id="iframe-id" src="https://serdj2846.github.io/MyGame/index.html" onload="iframeLoaded()"></iframe>
  </div>
  <script>
    function iframeLoaded() {
      var content = document.getElementById('iframe-id'); 
      content.contentWindow.document.addEventListener('wheel', onScroll, false);
      content.contentWindow.document.addEventListener('mousemove', onMouse, false);
      function onMouse() { content.contentWindow.document.body.style['pointer-events'] = 'auto'; }
      function onScroll() { content.contentWindow.document.body.style['pointer-events'] = 'none'; }
    }
  </script>
  <script src='load.js'></script>
</body>
  
</html>
В этом скрипте событие onload при загрузке содержимого <iframe> вызывает функцию iframeLoaded(), которая устанавливает обработчики событий на содержимое <iframe> после его загрузки.

User
 <script>
    function iframeLoaded() {
      var content = document.getElementById('iframe-id'); 
      content.contentWindow.document.addEventListener('wheel', onScroll, false);
      content.contentWindow.document.addEventListener('mousemove', onMouse, false);
      function onMouse() { content.contentWindow.document.body.style['pointer-events'] = 'auto'; }
      function onScroll() { content.contentWindow.document.body.style['pointer-events'] = 'none'; }
    }
  </script>
вот этот скрипт прекрасно работает, надо такой же чтобы можно было пальцем прокрутить на мобильном телефоне
ChatGPT
Для добавления возможности прокрутки пальцем на мобильном устройстве вам нужно добавить обработчик события touchmove аналогично обработчикам mousemove и wheel. Вот как можно модифицировать ваш скрипт:

html
Copy code
<script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('wheel', onScroll, false);
    content.contentWindow.document.addEventListener('mousemove', onMouse, false);
    content.contentWindow.document.addEventListener('touchmove', onTouchMove, false); // добавлено событие touchmove
    function onMouse() { content.contentWindow.document.body.style['pointer-events'] = 'auto'; }
    function onScroll() { content.contentWindow.document.body.style['pointer-events'] = 'none'; }
    function onTouchMove() { content.contentWindow.document.body.style['pointer-events'] = 'auto'; } // обработчик события touchmove
  }
</script>
Теперь при прокрутке пальцем на мобильном устройстве содержимое <iframe> должно реагировать.

User
не надо модифицировать, я хочу два независимых скрипта
ChatGPT
Понял, вы хотите два независимых скрипта для обработки событий на вашем <iframe>. В таком случае, просто добавьте второй скрипт для обработки событий прокрутки пальцем на мобильном устройстве:

html
Copy code
<script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('wheel', onScroll, false);
    content.contentWindow.document.addEventListener('mousemove', onMouse, false);
    function onMouse() { content.contentWindow.document.body.style['pointer-events'] = 'auto'; }
    function onScroll() { content.contentWindow.document.body.style['pointer-events'] = 'none'; }
  }
</script>

<script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('touchmove', onTouchMove, false); // добавлено событие touchmove
    function onTouchMove() { content.contentWindow.document.body.style['pointer-events'] = 'auto'; } // обработчик события touchmove
  }
</script>
Теперь у вас есть два независимых скрипта, каждый из которых обрабатывает свои события на <iframe>.

User
<script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('touchmove', onTouchMove, false); // добавлено событие touchmove
    function onTouchMove() { content.contentWindow.document.body.style['pointer-events'] = 'auto'; } // обработчик события touchmove
  }
</script>
а это как-то на ПК можно проверить?
ChatGPT
Вы можете симулировать событие touchmove с помощью мыши, чтобы проверить работу скрипта на компьютере. Для этого просто используйте обработчик события mousemove, который вы уже добавили, и вызовите функцию onTouchMove при движении мыши.

Вот пример того, как это можно сделать:

html
Copy code
<script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('mousemove', onMouseMove, false); // добавлено событие mousemove
    content.contentWindow.document.addEventListener('touchmove', onTouchMove, false); // добавлено событие touchmove
    function onMouseMove() { 
      // Симулируем событие touchmove
      onTouchMove();
    }
    function onTouchMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    } // обработчик события touchmove
  }
</script>
Теперь, когда вы будете двигать мышью над содержимым <iframe>, будет вызываться функция onTouchMove, и содержимое <iframe> должно реагировать на это, как если бы вы двигали пальцем на мобильном устройстве.

User
давай уберем мышь, оставим только для телефона, потому что вообще все перестало работать
ChatGPT
Понял вас. Если вы хотите оставить только обработку событий для мобильных устройств, вам необходимо удалить обработчик события mousemove и оставить только для touchmove. Вот как это можно сделать:

html
Copy code
<script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('touchmove', onTouchMove, false);
    function onTouchMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    }
  }
</script>
Теперь только при касании экрана на мобильном устройстве будет активироваться обработчик onTouchMove, а обработчик onMouseMove для события mousemove удалён, так что он больше не будет приводить к активации обработчика onTouchMove.

User
<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Logotest 1.0</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="game-container">
    <iframe id="iframe-id" src="https://serdj2846.github.io/MyGame/index.html" onload="iframeLoaded()"></iframe>
  </div>
  
  <script>
    function iframeLoaded() {
      var content = document.getElementById('iframe-id'); 
      content.contentWindow.document.addEventListener('wheel', onScroll, false);
      content.contentWindow.document.addEventListener('mousemove', onMouse, false);
      function onMouse() { content.contentWindow.document.body.style['pointer-events'] = 'auto'; }
      function onScroll() { content.contentWindow.document.body.style['pointer-events'] = 'none'; }
    }
  </script>

 <script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('touchmove', onTouchMove, false);
    function onTouchMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    }
  }
</script>
  
  <script src='load.js'></script>
</body>
  
</html>
пропала прокрутка от колеса мыши
ChatGPT
Проблема здесь в том, что вы переопределили функцию iframeLoaded() вторым скриптом, который обрабатывает событие touchmove. При этом первый скрипт, который обрабатывает события mousemove и wheel, не вызывается.

Для решения этой проблемы объедините оба скрипта в один, чтобы обе функции onMouseMove и onTouchMove вызывались из одной общей функции iframeLoaded():

html
Copy code
<script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('wheel', onScroll, false);
    content.contentWindow.document.addEventListener('mousemove', onMouseMove, false);
    content.contentWindow.document.addEventListener('touchmove', onTouchMove, false);
    
    function onMouseMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    }
    
    function onTouchMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    }
    
    function onScroll() { 
      content.contentWindow.document.body.style['pointer-events'] = 'none'; 
    }
  }
</script>
Теперь оба обработчика событий будут вызываться из одной функции iframeLoaded(), и прокрутка от колеса мыши должна вернуться к работе.

User
на ПК работает, на телефоне нет
ChatGPT
Понял. На мобильных устройствах события сенсорного ввода, такие как touchmove, не инициируются непосредственно при загрузке страницы, как это происходит с событиями мыши, поэтому вам нужно явно инициировать обработчик события touchmove при загрузке страницы на мобильном устройстве.

Вы можете добавить обработчик события touchmove для window внутри функции iframeLoaded(), чтобы он активировался при любом сенсорном вводе на странице. Вот как это можно сделать:

html
Copy code
<script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('wheel', onScroll, false);
    content.contentWindow.document.addEventListener('mousemove', onMouseMove, false);
    
    function onMouseMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    }
    
    function onScroll() { 
      content.contentWindow.document.body.style['pointer-events'] = 'none'; 
    }
    
    // Добавляем обработчик события touchmove для window
    window.addEventListener('touchmove', onTouchMove, false);
    
    function onTouchMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    }
  }
</script>
Теперь обработчик onTouchMove будет вызываться при сенсорном вводе на мобильном устройстве, и содержимое <iframe> должно реагировать на это.

User
не работает
ChatGPT
Попробуем добавить обработчик touchmove напрямую к содержимому <iframe>, чтобы убедиться, что событие touchmove правильно обрабатывается на мобильных устройствах. Вот обновленный код:

html
Copy code
<script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('wheel', onScroll, false);
    content.contentWindow.document.addEventListener('mousemove', onMouseMove, false);
    content.contentWindow.document.addEventListener('touchmove', onTouchMove, false);
    
    function onMouseMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    }
    
    function onScroll() { 
      content.contentWindow.document.body.style['pointer-events'] = 'none'; 
    }
    
    function onTouchMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    }
  }
</script>
Теперь обработчик onTouchMove должен вызываться при сенсорном вводе на мобильном устройстве. Если это не работает, возможно, есть другие проблемы, связанные с вашим кодом или с вашим устройством.

User
до того как в рамку загрузилось юнити работает и прокрутка пальцем и масштабирование, а после загрузки сразу все блокируется
ChatGPT
Понял. Проблема, вероятно, заключается в том, что содержимое Unity WebGL блокирует события сенсорного ввода после своей загрузки. Для решения этой проблемы вам может потребоваться изменить настройки вашего Unity WebGL проекта.

Unity WebGL настройки: Проверьте настройки вашего проекта Unity WebGL. Возможно, в настройках есть опции, связанные с обработкой сенсорного ввода или блокировкой событий, которые нужно настроить.
Использование Unity Input System: Если вы используете Unity Input System, проверьте его настройки и убедитесь, что он корректно обрабатывает сенсорный ввод и не блокирует события после загрузки.
Скрипты JavaScript: Если проблема не удается решить через настройки Unity, вам может потребоваться написать дополнительные скрипты JavaScript для обработки событий сенсорного ввода после загрузки содержимого Unity WebGL. Например, вы можете добавить скрипт, который снова активирует обработчики событий после загрузки Unity WebGL.
Примерно так может выглядеть такой скрипт:

html
Copy code
<script>
  function iframeLoaded() {
    var content = document.getElementById('iframe-id'); 
    content.contentWindow.document.addEventListener('wheel', onScroll, false);
    content.contentWindow.document.addEventListener('mousemove', onMouseMove, false);
    content.contentWindow.document.addEventListener('touchmove', onTouchMove, false);
    
    function onMouseMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    }
    
    function onScroll() { 
      content.contentWindow.document.body.style['pointer-events'] = 'none'; 
    }
    
    function onTouchMove() { 
      content.contentWindow.document.body.style['pointer-events'] = 'auto'; 
    }
    
    // После загрузки Unity WebGL снова активируем обработчики событий
    content.onload = function() {
      content.contentWindow.document.addEventListener('wheel', onScroll, false);
      content.contentWindow.document.addEventListener('mousemove', onMouseMove, false);
      content.contentWindow.document.addEventListener('touchmove', onTouchMove, false);
    };
  }
</script>
  
  <script src='load.js'></script>
</body>
  
</html>
